<html xmlns:th="http://www.thymeleaf.org">
<head>
<title th:text="#{titulo.modificar.revision}">Welcome</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- jquery -->
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu"
    crossorigin="anonymous">
<!-- Latest compiled and minified JavaScript -->
<script
    src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
    integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
    crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/791b4deb36.js" crossorigin="anonymous"></script>
<!-- archivos locales -->
<script th:src="@{/js/ese.js}" src="../../js/ese.js"></script>
<link rel="stylesheet" type="text/css" media="all"
    href="../../css/ese.css" th:href="@{/css/ese.css}" />
</head>
<body onload="nobackbutton();">
    <div th:replace="menu :: menu">...</div>
    <div th:replace="utiles :: error">...</div>
    <div th:replace="utiles :: info">...</div>
    <div class="row">
        <div class="container-fluid">
            <div class="col-lg-12">
                <h1 class="title-page"
                    th:text="#{titulo.crear.investigacion}">crear
                    investigacion</h1>
                <div style="width: 100%">
                    <form action="#" class="my-box"
                        th:object="${crearInvestigacion}"
                        id="crearInvestigacion" th:method="post"
                        th:action="@{/crearInvestigacion}"
                        enctype="multipart/form-data">
                        <input type="hidden"
                            th:field="*{idInvestigacion}">
                        <input type="hidden"
                            th:field="*{idEstadoInvestigacion}">
                        <input type="hidden"
                            th:field="*{pantallaVolver}">
                        <table class="table-grid">
                            <tbody>
                                <tr>
                                    <td colspan="4">
                                        <h3
                                            th:text="#{formulario.titulo.datos.suceso}">Datos
                                            del suceso</h3>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label
                                            for="numeroIdentificacion"
                                            th:text="#{formulario.numero.identificacion}">Nº
                                            Identificacion:</label>
                                        <input class="form-control"
                                            type="text" required
                                            th:field="*{numeroIdentificacion}"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}" />
                                    </td>
                                    <td>
                                        <label for="idEmpresa"
                                            th:text="#{formulario.empresa}">empresa:</label>
                                        <select class="form-control"
                                            th:field="*{idEmpresa}"
                                            required
                                            th:style="*{((idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura)?'pointer-events: none;':''}"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}">
                                            <option
                                                th:each="var : ${empresas}"
                                                th:value="${var.idCompania}"
                                                th:text="${var.nombre}">empresa</option>
                                        </select>
                                    </td>
                                    <td>
                                        <label for="idTipoInvestigacion"
                                            th:text="#{formulario.tipo.investigacion}">tipo
                                            investigacion:</label>
                                        <select class="form-control"
                                            th:field="*{idTipoInvestigacion}"
                                            required
                                            th:style="*{((idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura)?'pointer-events: none;':''}"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}">
                                            <option
                                                th:each="var : ${tiposInvestigacion}"
                                                th:value="${var.idTipoAccidente}"
                                                th:text="${var.valor}">tipo</option>
                                        </select>
                                    </td>
                                    <td>
                                        <label for="idCausa"
                                            th:text="#{formulario.causa}">causa:</label>
                                        <select class="form-control"
                                            th:field="*{idCausa}"
                                            required
                                            th:style="*{((idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura)?'pointer-events: none;':''}"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}">
                                            <option
                                                th:each="var : ${causas}"
                                                th:value="${var.idCausaAccidente}"
                                                th:text="${var.valor}">causa</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label for="fecha"
                                            th:text="#{formulario.fecha}">fecha:</label>
                                        <input class="form-control"
                                            type="date"
                                            th:field="*{fecha}" required
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}" />
                                    </td>
                                    <td>
                                        <label for="hora"
                                            th:text="#{formulario.hora}">hora:</label>
                                        <input class="form-control"
                                            type="time"
                                            th:field="*{hora}" required
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}" />
                                    </td>
                                    <td>
                                        <label for="lugar"
                                            th:text="#{formulario.lugar}">lugar:</label>
                                        <input class="form-control"
                                            type="text"
                                            th:field="*{lugar}" required
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <h3
                                            th:text="#{formulario.titulo.descripcion.suceso}">Descripcion
                                            suceso</h3>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="descripcionSucesoInvestigacion"
                                            th:text="#{formulario.descripcion.suceso}">Descripcion
                                            suceso:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{descripcionSucesoInvestigacion}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="condicionesAtmosfericasInvestigacion"
                                            th:text="#{formulario.condiciones.atmosfericas}">condiciones
                                            atmosfericas:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{condicionesAtmosfericasInvestigacion}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="circulacionesImplicadasInvestigacion"
                                            th:text="#{formulario.circulaciones.implicadas}">circulaciones
                                            implicadas:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{circulacionesImplicadasInvestigacion}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="composicionTrenesInvestigacion"
                                            th:text="#{formulario.composicion.trenes}">composicion
                                            trenes:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{composicionTrenesInvestigacion}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="danhiosMaterialRodanteInvestigacion"
                                            th:text="#{formulario.danhio.material.rodante}">daño
                                            material rodante:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{danhiosMaterialRodanteInvestigacion}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="danhiosInfraestructuraInvestigacion"
                                            th:text="#{formulario.danhio.infraestructura}">daño
                                            infraestructura:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{danhiosInfraestructuraInvestigacion}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="perturbacionesServicio"
                                            th:text="#{formulario.perturbaciones.servicio}">perturbaciones
                                            servicio:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{perturbacionesServicio}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="previsionesRestablecimiento"
                                            th:text="#{formulario.previsiones.restablecimiento}">previsiones
                                            restablecimiento:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{previsionesRestablecimiento}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="primerasMedidasAdoptadas"
                                            th:text="#{formulario.primeras.medidas.adoptadas}">primeras
                                            medidas adoptadas:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{primerasMedidasAdoptadas}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <label
                                            for="notificacionesEfectuadas"
                                            th:text="#{formulario.notificaciones.efectuadas}">notificaciones
                                            efectuadas:</label>
                                        <textarea class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            rows="4" cols="125"
                                            maxlength="500"
                                            style="resize: none"
                                            th:field="*{notificacionesEfectuadas}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <h3
                                            th:text="#{formulario.titulo.victimas.tren}">victimas
                                            tren</h3>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label for="heridosVictimaTren"
                                            th:text="#{formulario.heridos}">heridos:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            type="number"
                                            th:field="*{heridosVictimaTren}" />
                                    </td>
                                    <td>
                                        <label for="muertesVictimaTren"
                                            th:text="#{formulario.muertes}">muertes:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            type="number"
                                            th:field="*{muertesVictimaTren}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <h3
                                            th:text="#{formulario.titulo.victimas.ajenas.tren}">victimas
                                            ajenas tren</h3>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label
                                            for="heridosVictimaAjenaTren"
                                            th:text="#{formulario.heridos}">heridos:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            type="number"
                                            th:field="*{heridosVictimaAjenaTren}" />
                                    </td>
                                    <td>
                                        <label
                                            for="muertesVictimaAjenaTren"
                                            th:text="#{formulario.muertes}">muertes:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idInvestigacion !=null and idEstadoInvestigacion!=1) or lectura}"
                                            type="number"
                                            th:field="*{muertesVictimaAjenaTren}" />
                                    </td>
                                </tr>
                                <tr
                                    th:if="*{idInvestigacion !=null and idEstadoInvestigacion!=1}">
                                    <td colspan="4">
                                        <label for="intervieneCIAF"
                                            th:text="#{formulario.interviene.ciaf}">Interviene
                                            CIAF:</label>
                                        <input type="checkbox"
                                            th:field="*{intervieneCIAF}"
                                            th:readonly="*{(idEstadoInvestigacion!= 2) or lectura}"
                                            th:style="*{((idEstadoInvestigacion!= 2) or lectura)?'pointer-events: none;cursor: not-allowed;':''}"
                                            onclick="mostrarOcultar('intervieneCIAF','idResponsableSeguridad')">
                                        <!--                                         <input class="customradio" -->
                                        <!--                                             th:readonly="*{idEstadoInvestigacion!= 2}" -->
                                        <!--                                             th:style="*{idEstadoInvestigacion!= 2?'pointer-events: none;cursor: not-allowed;':''}" -->
                                        <!--                                             type="radio" -->
                                        <!--                                             th:name="intervieneCIAF" -->
                                        <!--                                             id="intervieneCIAFSi" -->
                                        <!--                                             th:value="1" th:text="Si" -->
                                        <!--                                             th:checked="*{intervieneCIAF!= null and intervieneCIAF}" -->
                                        <!--                                             onclick="mostrarOcultar('intervieneCIAF','idResponsableSeguridad')" /> -->
                                        <!--                                         <input class="customradio" -->
                                        <!--                                             th:readonly="*{idEstadoInvestigacion!= 2}" -->
                                        <!--                                             th:style="*{idEstadoInvestigacion!= 2?'pointer-events: none;cursor: not-allowed;':''}" -->
                                        <!--                                             type="radio" -->
                                        <!--                                             th:name="intervieneCIAF" -->
                                        <!--                                             id="intervieneCIAFNo" -->
                                        <!--                                             th:value="0" -->
                                        <!--                                             th:checked="*{intervieneCIAF== null or !intervieneCIAF}" -->
                                        <!--                                             th:text="No" -->
                                        <!--                                             onclick="mostrarOcultar('intervieneCIAF','idResponsableSeguridad')" /> -->
                                    </td>
                                </tr>
                                <tr th:if="*{idInvestigacion!= null}"
                                    id="intervieneCIAFSeleccion"
                                    th:hidden="*{intervieneCIAF== null or !intervieneCIAF}">
                                    <td>
                                        <label
                                            for="nombreResponsableCIAF"
                                            th:text="#{formulario.responsable.ciaf.nombre}">Nombre
                                            responsable ciaf:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idEstadoInvestigacion!= 2) or lectura}"
                                            type="text"
                                            th:field="*{nombreResponsableCIAF}" />
                                    </td>
                                    <td>
                                        <label
                                            for="telefonoResponsableCIAF"
                                            th:text="#{formulario.responsable.ciaf.telefono}">Telefono
                                            responsable ciaf:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idEstadoInvestigacion!= 2) or lectura}"
                                            type="text" maxlength="9"
                                            th:field="*{telefonoResponsableCIAF}" />
                                    </td>
                                    <td>
                                        <label
                                            for="correoResponsableCIAF"
                                            th:text="#{formulario.responsable.ciaf.correo}">correo
                                            responsable ciaf:</label>
                                        <input class="form-control"
                                            th:readonly="*{(idEstadoInvestigacion!= 2) or lectura}"
                                            type="text"
                                            th:field="*{correoResponsableCIAF}" />
                                    </td>
                                    <td>
                                        <label
                                            for="idResponsableSeguridad"
                                            th:text="#{formulario.responsable.seguridad}">Responsable
                                            seguridad:</label>
                                        <select class="form-control"
                                            th:field="*{idResponsableSeguridad}"
                                            th:style="*{((idEstadoInvestigacion!= 2) or lectura)?'pointer-events: none;':''}"
                                            th:readonly="*{(idEstadoInvestigacion!= 2) or lectura}">
                                            <option
                                                th:each="var : ${responsablesSeguridad}"
                                                th:value="${var.idPersonal}"
                                                th:text="${var.nombre}">Responsable
                                                seguridad</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr th:if="*{intervieneCIAF!= null}">
                                    <td colspan="4">
                                        <label for="delegaInvestigacion"
                                            th:text="#{formulario.delega.investigacion}">delega
                                            investigacion:</label>
                                        <input type="checkbox"
                                            th:field="*{delegaInvestigacion}"
                                            th:readonly="*{(idEstadoInvestigacion!= 3) or lectura}"
                                            th:style="*{((idEstadoInvestigacion!= 3) or lectura)?'pointer-events: none;cursor: not-allowed;':''}"
                                            onclick="mostrarOcultar('delegaInvestigacion','idDelegadoInvestigacion')">
                                        <!--                                         <input class="customradio" -->
                                        <!--                                             th:readonly="*{idEstadoInvestigacion!= 3}" -->
                                        <!--                                             th:style="*{idEstadoInvestigacion!= 3?'pointer-events: none;':''}" -->
                                        <!--                                             type="radio" -->
                                        <!--                                             th:name="delegaInvestigacion" -->
                                        <!--                                             id="delegaInvestigacionSi" -->
                                        <!--                                             th:value="1" th:text="Si" -->
                                        <!--                                             th:checked="*{delegaInvestigacion != null and delegaInvestigacion}" -->
                                        <!--                                             onclick="mostrarOcultar('delegaInvestigacion','idDelegadoInvestigacion')" /> -->
                                        <!--                                         <input class="customradio" -->
                                        <!--                                             th:readonly="*{idEstadoInvestigacion!= 3}" -->
                                        <!--                                             th:style="*{idEstadoInvestigacion!= 3?'pointer-events: none;':''}" -->
                                        <!--                                             type="radio" -->
                                        <!--                                             th:name="delegaInvestigacion" -->
                                        <!--                                             id="delegaInvestigacionNo" -->
                                        <!--                                             th:value="0" th:text="No" -->
                                        <!--                                             th:checked="*{delegaInvestigacion == null or !delegaInvestigacion}" -->
                                        <!--                                             onclick="mostrarOcultar('delegaInvestigacion','idDelegadoInvestigacion')" /> -->
                                    </td>
                                </tr>
                                <tr th:if="*{intervieneCIAF!= null}"
                                    id="delegaInvestigacionSeleccion"
                                    th:hidden="*{delegaInvestigacion== null or !delegaInvestigacion}">
                                    <td>
                                        <label
                                            for="idDelegadoInvestigacion"
                                            th:text="#{formulario.delegado.investigacion}">Delegado
                                            investigacion:</label>
                                        <select class="form-control"
                                            th:field="*{idDelegadoInvestigacion}"
                                            th:style="*{((idEstadoInvestigacion!= 3) or lectura)?'pointer-events: none;':''}"
                                            th:readonly="*{(idEstadoInvestigacion!= 3) or lectura}">
                                            <option
                                                th:each="var : ${delegadosInvestigacion}"
                                                th:value="${var.idPersonal}"
                                                th:text="${var.nombre}">Delegado
                                                investigacion</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr
                                    th:if="*{idEstadoInvestigacion >= 4}">
                                    <td colspan="4">
                                        <h3
                                            th:text="#{formulario.documentos.anexos}">Documentos
                                            anexos</h3>
                                    </td>
                                </tr>
                                <tr
                                    th:if="*{idEstadoInvestigacion >= 4}">
                                    <td colspan="4">
                                        <button
                                            class="btn btn-lg btn-primary btn-block mi-boton"
                                            type="submit"
                                            th:text="#{boton.documentos.anexos}"
                                            formnovalidate
                                            th:formaction="@{/verAnexosInvestigacionCrearInvestigacion}">Documento
                                            anexo</button>
                                    </td>
                                </tr>
                               <tr
                                    th:if="*{(idEstadoInvestigacion >= 6 and intervieneCIAF) or lectura}">
                                    <td>
                                        <br />
                                    </td>
                                </tr>
                                <tr
                                    th:if="*{(idEstadoInvestigacion >= 6 and intervieneCIAF) or lectura}">
                                    <td
                                        th:if="*{idEstadoInvestigacion == 6}">
                                        <label for="evidencia"
                                            th:text="#{formulario.evidencia.ciaf}">Evidencia:</label>
                                        <input class="form-control-file"
                                            type="file"
                                            th:field="*{evidenciaInformeRecibidoCIAF}"
                                            accept=".jpg , .jpeg,.pdf"
                                            required>
                                    </td>
                                </tr>
                                <tr
                                    th:if="*{idEstadoInvestigacion >= 6 and intervieneCIAF and idEstadoInvestigacion != 6}">
                                    <td>
                                        <label for="evidencia"
                                            th:text="#{formulario.evidencia.ciaf}">Evidencia:</label>
                                    </td>
                               
                                    <td>
                                        <button
                                            class="btn btn-lg btn-primary btn-block mi-boton"
                                            type="submit"
                                            th:text="#{boton.ver}"
                                            th:formtarget="_blank"
                                            th:formaction="@{/verEvidenciaInformeRecibidoCIAF}">Informe
                                            recibido CIAF</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <br />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="1">
                                        <button
                                            class="btn btn-lg btn-primary btn-block mi-boton"
                                            th:if="*{idInvestigacion ==null or idEstadoInvestigacion==1 and !lectura}"
                                            type="submit"
                                            th:formaction="@{/guardarInvestigacion}">Guardar</button>
                                        <button
                                            class="btn btn-lg btn-primary btn-block mi-boton"
                                            th:if="*{idInvestigacion !=null and idEstadoInvestigacion!=1 and idEstadoInvestigacion!=9 and !lectura}"
                                            type="submit"
                                            th:text="*{idEstadoInvestigacion==4} ? 'Fin Recogida Datos' : 'Generar Ficha'"
                                            th:formaction="@{/generarFichaInvestigacion}">Generar
                                            Ficha</button>
                                    </td>
                                    <td colspan="2">
                                        <button
                                            th:if="*{idInvestigacion !=null and idEstadoInvestigacion==1 and !lectura}"
                                            class="btn btn-lg btn-primary btn-block mi-boton"
                                            type="submit"
                                            th:formaction="@{/generarFichaInvestigacion}">Generar
                                            Ficha</button>
                                    </td>
                                    <td colspan="1">
                                        <button
                                            class="btn btn-lg btn-primary btn-block mi-boton"
                                            type="submit"
                                            th:formaction="@{/volverInvestigacion}"
                                            formnovalidate>Volver</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
